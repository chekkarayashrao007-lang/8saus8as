<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üå∏ Sakura NEET Quiz üå∏</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Dancing+Script:wght@700&family=Montserrat:wght@300;400&display=swap"
      rel="stylesheet">
<style>
/* ==========================================================
   0Ô∏è‚É£ GLOBALS
   ========================================================== */
html,body{
    height:100%;margin:0;
    font-family:'Montserrat',sans-serif;
    overflow:hidden;
    background:#0b0b1a;
    cursor:url('data:image/svg+xml,\
<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2220%22 height=%2220%22>\
<circle cx=%2210%22 cy=%2210%22 r=%226%22 fill=%22%23ffb7c5%22/></svg>') 10 10,auto;
}

/* --------------------------------------------------------------
   1Ô∏è‚É£ CURTAIN
   -------------------------------------------------------------- */
#curtain{
    position:fixed; inset:0;
    background:#111;
    display:flex; justify-content:center; align-items:center;
    transition:opacity .8s ease;
    z-index:999;
}
#curtain button{
    font-size:1.6rem;padding:.9rem 2rem;
    border:2px solid #fff;background:rgba(255,255,255,.06);
    color:#fff;border-radius:10px;cursor:pointer;
    animation:pulse 2s infinite;
}
@keyframes pulse{
    0%,100%{transform:scale(1);box-shadow:0 0 8px #fff}
    50%{transform:scale(1.07);box-shadow:0 0 20px #fff}
}

/* --------------------------------------------------------------
   2Ô∏è‚É£ BACKGROUND ‚Äì Sakura gradient + floating pink petals
   -------------------------------------------------------------- */
body{
    background:linear-gradient(210deg,#ffe5e9 0%,#ffb7c5 45%,#f8c8dc 80%,#fff 100%);
    background-size:400% 400%;
    animation:grad 22s ease infinite;
}
@keyframes grad{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}
#bokeh-canvas{
    position:fixed; inset:0;pointer-events:none;z-index:0;
}

/* --------------------------------------------------------------
   3Ô∏è‚É£ QUIZ CONTAINER (now on top)
   -------------------------------------------------------------- */
#quiz{
    position:fixed; inset:0;z-index:5;          /* ‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë */
    display:flex;flex-direction:column;justify-content:center;align-items:center;
    text-align:center;opacity:0;transition:opacity .7s ease .3s;
    pointer-events:auto;                      /* make sure clicks go through */
}
#question-box{
    backdrop-filter:blur(12px) saturate(180%);
    background:rgba(255,255,255,.25);
    border-radius:16px;padding:2rem 2.5rem;
    border:1px solid rgba(255,255,255,.3);
    box-shadow:0 8px 32px rgba(0,0,0,.3);
    max-width:90%;width:460px;
}
#question{
    font-family:'Noto Serif JP',serif;
    font-size:1.9rem;margin-bottom:1.4rem;color:#4a001e;
}
.answers{
    display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;
}
.answers button{
    font-size:1rem;padding:.6rem 0.8rem;
    border:none;border-radius:8px;
    background:rgba(255,255,255,.2);
    color:#4a001e;cursor:pointer;
    transition:background .2s,transform .2s;
}
.answers button:hover{
    background:rgba(255,255,255,.35);
    transform:scale(1.04);
}
.correct{background:#ff5e76 !important;color:#fff;}
.wrong{background:#c0392b !important;color:#fff;}
#progress{margin-top:1rem;color:#4a001e;font-size:0.9rem;}

/* --------------------------------------------------------------
   4Ô∏è‚É£ FINAL SCREEN
   -------------------------------------------------------------- */
#final{
    position:fixed; inset:0;z-index:4;
    display:flex;flex-direction:column;justify-content:center;align-items:center;
    text-align:center;opacity:0;transition:opacity .9s ease .4s;
}
.glass{
    backdrop-filter:blur(12px) saturate(180%);
    background:rgba(255,255,255,.25);
    border-radius:16px;padding:2.5rem 3rem;
    border:1px solid rgba(255,255,255,.3);
    box-shadow:0 8px 32px rgba(0,0,0,.3);
}
.glass h1{font-size:clamp(2rem,8vw,5rem);font-weight:300;margin:0;color:#4a001e;}
.glass h2{font-family:'Dancing Script',cursive;font-size:clamp(2.5rem,10vw,8rem);margin:0;color:#ff5e76;
    text-shadow:0 0 8px #ff5e76,0 0 18px #ff9aa2,0 0 30px #c0392b;}
#play-again{
    margin-top:2rem;padding:.6rem 1.4rem;font-size:1.2rem;
    border:1px solid #fff;background:rgba(255,255,255,.2);color:#4a001e;border-radius:8px;cursor:pointer;
    animation:pulse 3s infinite;
}

/* --------------------------------------------------------------
   5Ô∏è‚É£ SIGNATURE & AUDIO
   -------------------------------------------------------------- */
#signature{
    position:absolute;bottom:1.8rem;right:1.8rem;
    font-family:'Dancing Script',cursive;font-size:2rem;
    color:rgba(255,255,255,.75);opacity:0;animation:fadeIn 1s forwards 3.5s;
}
#audio-btn{
    position:absolute;top:1.8rem;right:1.8rem;
    background:none;border:none;color:#fff;font-size:1.4rem;cursor:pointer;
    opacity:0;animation:fadeIn 0.9s forwards 4s;transition:color .3s;
}
#audio-btn:hover{color:#ff5e76}
@keyframes fadeIn{to{opacity:1}}

/* --------------------------------------------------------------
   6Ô∏è‚É£ CONFETTI CANVAS (pink & pastel)
   -------------------------------------------------------------- */
#confetti{
    position:fixed; inset:0;pointer-events:none;z-index:3;
}

/* --------------------------------------------------------------
   7Ô∏è‚É£ MOUSE TRAIL (soft pink dust)
   -------------------------------------------------------------- */
</style>
</head>
<body>

<div id="curtain"><button id="openBtn">Tap for a Sakura Surprise üå∏</button></div>

<canvas id="bokeh-canvas"></canvas>

<div id="quiz">
    <div id="question-box">
        <div id="question">Question?</div>
        <div class="answers">
            <button data-index="0">A</button>
            <button data-index="1">B</button>
            <button data-index="2">C</button>
            <button data-index="3">D</button>
        </div>
        <div id="progress">0 / 5</div>
    </div>
</div>

<div id="final">
    <div class="glass"><h1>Happy Birthday</h1><h2>Anushka</h2></div>
    <button id="play-again">Play Again</button>
</div>

<canvas id="confetti"></canvas>

<div id="signature">‚Äë Yash</div>
<audio id="music" loop preload="auto"><source src="music.mp3" type="audio/mpeg"></audio>
<button id="audio-btn" title="Play / Pause music">üîä</button>

<script>
window.addEventListener('DOMContentLoaded',()=>{            // ‚Üê ensure DOM is ready
/* ==========================================================
   0Ô∏è‚É£ HELPERS
   ========================================================== */
const raf = window.requestAnimationFrame || (cb=>setTimeout(cb,1000/60));

/* --------------------------------------------------------------
   1Ô∏è‚É£ CURTAIN ‚Üí START QUIZ
   -------------------------------------------------------------- */
const curtain   = document.getElementById('curtain');
const openBtn   = document.getElementById('openBtn');
const quizDiv   = document.getElementById('quiz');
const finalDiv  = document.getElementById('final');
const music     = document.getElementById('music');
const audioBtn  = document.getElementById('audio-btn');

openBtn.addEventListener('click',()=>{
    curtain.style.opacity='0';
    curtain.style.pointerEvents = 'none'; // <-- FIX 1: Stop curtain from blocking quiz
    setTimeout(()=>curtain.remove(),800);
    startQuiz();
    music.play().catch(()=>audioBtn.style.opacity='1');
});
let musicOn = false;
audioBtn.addEventListener('click',()=>{
    if(musicOn){ music.pause(); audioBtn.textContent='üîä'; }
    else{ music.play(); audioBtn.textContent='‚è∏Ô∏è'; }
    musicOn=!musicOn;
});

/* --------------------------------------------------------------
   2Ô∏è‚É£ BACKGROUND BOKEH ‚Äì pink petals
   -------------------------------------------------------------- */
const bokehCanvas = document.getElementById('bokeh-canvas');
const bCtx = bokehCanvas.getContext('2d');
let BW,BH;
function resizeBokeh(){ BW=bokehCanvas.width=innerWidth; BH=bokehCanvas.height=innerHeight; }
window.addEventListener('resize',resizeBokeh);
resizeBokeh();
class Bokeh{
    constructor(){ this.reset(); }
    reset(){
        this.x = Math.random()*BW;
        this.y = BH + Math.random()*50;
        this.r = Math.random()*2 + 1;
        this.vx = (Math.random()-0.5)*0.3;
        this.vy = -(0.2 + Math.random()*0.6);
        this.o  = Math.random()*0.4 + 0.2;
    }
    update(){ this.x+=this.vx; this.y+=this.vy; if(this.y<-10) this.reset(); }
    draw(){
        bCtx.beginPath(); bCtx.arc(this.x,this.y,this.r,0,Math.PI*2);
        bCtx.fillStyle = `rgba(255,183,197,${this.o})`;
        bCtx.shadowColor='rgba(255,183,197,0.7)'; bCtx.shadowBlur=8;
        bCtx.fill();
    }
}
const bokeh = [];
for(let i=0;i<130;i++) bokeh.push(new Bokeh());
function animateBokeh(){ bCtx.clearRect(0,0,BW,BH); bokeh.forEach(p=>{p.update();p.draw();}); raf(animateBokeh); }
animateBokeh();

/* --------------------------------------------------------------
   3Ô∏è‚É£ QUIZ LOGIC
   -------------------------------------------------------------- */
const questions = [
    { q:"What is the chemical symbol of water?", a:["H‚ÇÇO","CO‚ÇÇ","O‚ÇÇ","NaCl"], c:0 },
    { q:"Which organ does NOT belong to the digestive system?", a:["Stomach","Liver","Kidney","Pancreas"], c:2 },
    { q:"What is the unit of electric current?", a:["Volt","Ohm","Ampere","Watt"], c:2 },
    { q:"Who discovered the law of gravitation?", a:["Newton","Einstein","Galilei","Tesla"], c:0 },
    { q:"Which particle has a negative charge?", a:["Proton","Neutron","Electron","Positron"], c:2 }
];
let curIdx = 0, score = 0;

/* ----- start ----- */
function startQuiz(){
    quizDiv.style.opacity='1';
    loadQuestion();
}

/* ----- load a question ----- */
function loadQuestion(){
    const q = questions[curIdx];
    document.getElementById('question').textContent = q.q;
    document.querySelectorAll('.answers button').forEach((btn,i)=>{
        btn.textContent = q.a[i];
        btn.disabled = false;
        btn.classList.remove('correct','wrong');
    });
    document.getElementById('progress').textContent = `${curIdx+1} / ${questions.length}`;
}

/* ----- answer click ----- */
document.querySelectorAll('.answers button').forEach(btn=>{
    btn.addEventListener('click',()=>{
        console.log('button clicked ‚Äì index', btn.dataset.index);    // <‚Äë‚Äë debug line
        document.querySelectorAll('.answers button').forEach(b=>b.disabled=true);
        const chosen = Number(btn.dataset.index);
        const correct = questions[curIdx].c;
        if(chosen===correct){
            btn.classList.add('correct');
            score++;
        }else{
            btn.classList.add('wrong');
            const rightBtn = document.querySelector(`button[data-index="${correct}"]`);
            rightBtn.classList.add('correct');
        }
        setTimeout(()=>{
            curIdx++;
            if(curIdx < questions.length) loadQuestion();
            else endQuiz();
        },1200);
    });
});

/* --------------------------------------------------------------
   4Ô∏è‚É£ END QUIZ ‚Üí BIRTHDAY + CONFETTI
   -------------------------------------------------------------- */
function endQuiz(){
    quizDiv.style.opacity='0';
    quizDiv.style.pointerEvents = 'none'; // <-- FIX 2: Stop quiz from blocking final screen
    setTimeout(()=>quizDiv.style.display='none',800);
    finalDiv.style.opacity='1';

    // --- MODIFICATION START ---

    // Create Score Element
    const scoreEl = document.createElement('div');
    scoreEl.style.marginTop='0.9rem';
    scoreEl.style.fontSize='1.4rem';
    scoreEl.style.color='#4a001e';
    scoreEl.textContent = `Your score: ${score} / ${questions.length}`;

    // Create Remark Element
    const remarkEl = document.createElement('div');
    remarkEl.style.marginTop = '0.7rem';
    remarkEl.style.fontSize = '1.3rem';
    remarkEl.style.fontWeight = '700';
    remarkEl.style.color = '#4a001e';

    // Set remark text based on score
    if (score < 4) {
        remarkEl.textContent = "You're dumb"; // Corrected grammar
    } else {
        remarkEl.textContent = "NEET 2026 pakka! üî•";
    }

    // Append both to the glass container
    const glassEl = document.querySelector('#final .glass');
    glassEl.appendChild(scoreEl);
    glassEl.appendChild(remarkEl);

    // --- MODIFICATION END ---
    
    launchConfetti();
}

/* --------------------------------------------------------------
   5Ô∏è‚É£ CONFETTI ‚Äì pink & pastel shards
   -------------------------------------------------------------- */
const confettiCanvas = document.getElementById('confetti');
const cCtx = confettiCanvas.getContext('2d');
let CW,CH;
function resizeConfetti(){ CW=confettiCanvas.width=innerWidth; CH=confettiCanvas.height=innerHeight; }
window.addEventListener('resize',resizeConfetti);
resizeConfetti();

class Confetto{
    constructor(){ this.reset(); }
    reset(){
        this.x = Math.random()*CW;
        this.y = -Math.random()*CH;
        this.size = Math.random()*6 + 4;
        this.speedY = Math.random()*2.5 + 1.5;
        this.speedX = (Math.random()-0.5)*1.5;
        this.rotation = Math.random()*360;
        this.rotSpeed = (Math.random()-0.5)*4;
        const hue = 340 + Math.random()*20;          // pink‚Äëpurple range
        this.color = `hsl(${hue},70%,80%)`;
    }
    update(){
        this.x += this.speedX; this.y += this.speedY; this.rotation += this.rotSpeed;
        if(this.y > CH+this.size) this.reset();
    }
    draw(){
        cCtx.save();
        cCtx.translate(this.x,this.y);
        cCtx.rotate(this.rotation*Math.PI/180);
        cCtx.fillStyle = this.color;
        cCtx.fillRect(-this.size/2,-this.size/2,this.size,this.size);
        cCtx.restore();
    }
}
const confetti = [];
for(let i=0;i<120;i++) confetti.push(new Confetto());

let confettiAnimId;
function launchConfetti(){
    function animate(){
        cCtx.clearRect(0,0,CW,CH);
        confetti.forEach(p=>{p.update();p.draw();});
        confettiAnimId = raf(animate);
    }
    animate();
    setTimeout(()=>cancelAnimationFrame(confettiAnimId),5000);
}

/* --------------------------------------------------------------
   6Ô∏è‚É£ PLAY AGAIN
   -------------------------------------------------------------- */
document.getElementById('play-again').addEventListener('click',()=>{
    finalDiv.style.opacity='0';
    setTimeout(()=>finalDiv.style.display='none',800);

    // --- MODIFICATION START ---
    // Select ALL dynamic divs (score + remark) inside .glass and remove them
    const dynamicElements = document.querySelectorAll('#final .glass div'); 
    dynamicElements.forEach(el => el.remove());
    // --- MODIFICATION END ---

    curIdx=0; score=0;
    quizDiv.style.display='flex';
    quizDiv.style.pointerEvents = 'auto'; // <-- FIX 3: Allow quiz to be clicked again
    setTimeout(()=>quizDiv.style.opacity='1',50);
    loadQuestion();
});

/* --------------------------------------------------------------
   7Ô∏è‚É£ MOUSE TRAIL ‚Äì soft pink dust
   -------------------------------------------------------------- */
document.addEventListener('mousemove',e=>{
    const dot=document.createElement('div');
    dot.style.position='fixed';
    dot.style.left=`${e.clientX-3}px`;
    dot.style.top=`${e.clientY-3}px`;
    dot.style.width=dot.style.height='6px';
    dot.style.borderRadius='50%';
    dot.style.background='rgba(255,183,197,.6)';
    dot.style.pointerEvents='none';
    dot.style.transition='transform .7s ease-out, opacity .7s';
    document.body.appendChild(dot);
    requestAnimationFrame(()=>{
        dot.style.transform='scale(4)';
        dot.style.opacity='0';
    });
    setTimeout(()=>dot.remove(),720);
});
}); // end DOMContentLoaded
</script>
</body>
</html>